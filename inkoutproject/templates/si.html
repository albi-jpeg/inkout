{% extends 'base.html' %}

{% load static %}
{% load widget_tweaks %}
{% load crispy_forms_tags %}

{% block title %}
  Ink Out!
{% endblock %}

{% block content %}
  <body class="text-white">
    <a href="#subir" class="subir"><button class="btn btn-dark">^</button></a>
    <a id="subir"></a>
    <header class="vh-100">
      <nav class="navbar navbar-expand-lg fixed-top px-5">
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link text-white" href="{% url 'landpage' %}">INICIO</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <main class="adminpanelmain">
      <section class="Adminpanel">
        <div class="content">
          <h1>Panel de Administración</h1>
          {% if messages %}
            <div class="alert alert-danger">
              {% for message in messages %}
                <p>{{ message }}</p>
              {% endfor %}
            </div>
          {% endif %}
          <br />
          <div id="show-content">
            {% if mostrar == 'artistas' %}
              {% if accion == 'crear' %}
                <h2>Añadir Nuevo Artista</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'editar' %}
                <h2>Editar Artista</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'borrar' %}
                <h2>¿Seguro que deseas borrar este artista?</h2>
                <form method="post">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-danger">Borrar</button>
                  <a href="?mostrar=artistas" class="btn btn-secondary">Cancelar</a>
                </form>
              {% else %}
                <h2>Lista de Artistas</h2>
                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th>Usuario</th>
                      <th>Nombre artístico</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for artista in artistas %}
                      <tr>
                        <td>{{ artista.usuario }}</td>
                        <td>{{ artista.nombre_artistico }}</td>
                        <td>
                          <a href="?mostrar=artistas&accion=editar&pk={{ artista.pk }}" class="btn btn-sm btn-dark">Editar</a>
                          <a href="?mostrar=artistas&accion=borrar&pk={{ artista.pk }}" class="btn btn-sm btn-danger">Borrar</a>
                        </td>
                      </tr>
                    {% empty %}
                      <tr>
                        <td colspan="3">No hay artistas registrados.</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% endif %}
            {% elif mostrar == 'citas' %}
              {% if accion == 'crear' %}
                <h2>Añadir Nueva Cita</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'editar' %}
                <h2>Editar Cita</h2><br />
                <form class="form col-6" method="post">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'borrar' %}
                <h2>¿Seguro que deseas borrar esta cita?</h2>
                <form method="post">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-danger">Borrar</button>
                  <a href="?mostrar=citas" class="btn btn-secondary">Cancelar</a>
                </form>
              {% else %}
                <h2>Lista de Citas</h2>
                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th>Artista</th>
                      <th>Usuario</th>
                      <th>Fecha</th>
                      <th>Hora</th>
                      <th>Estado</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for cita in citas %}
                      <tr>
                        <td>{{ cita.artista }}</td>
                        <td>{{ cita.usuario }}</td>
                        <td>{{ cita.fecha }}</td>
                        <td>{{ cita.hora }}</td>
                        <td>{{ cita.estado }}</td>
                        <td>
                          <a href="?mostrar=citas&accion=editar&pk={{ cita.pk }}" class="btn btn-sm btn-dark">Editar</a>
                          <a href="?mostrar=citas&accion=borrar&pk={{ cita.pk }}" class="btn btn-sm btn-danger">Borrar</a>
                        </td>
                      </tr>
                    {% empty %}
                      <tr>
                        <td colspan="6">No hay citas registradas.</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% endif %}
            {% elif mostrar == 'disenyos' %}
              {% if accion == 'crear' %}
                <h2>Añadir Nuevo Diseño</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'editar' %}
                <h2>Editar Diseño</h2><br />
                <form class="form col-6" method="post">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'borrar' %}
                <h2>¿Seguro que deseas borrar este diseño?</h2>
                <form method="post">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-danger">Borrar</button>
                  <a href="?mostrar=disenyos" class="btn btn-secondary">Cancelar</a>
                </form>
              {% else %}
                <h2>Lista de Diseños</h2>
                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th>Título</th>
                      <th>Artista</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for disenyo in disenyos %}
                      <tr>
                        <td>{{ disenyo.titulo }}</td>
                        <td>{{ disenyo.artista }}</td>
                        <td>
                          <a href="?mostrar=disenyos&accion=editar&pk={{ disenyo.pk }}" class="btn btn-sm btn-dark">Editar</a>
                          <a href="?mostrar=disenyos&accion=borrar&pk={{ disenyo.pk }}" class="btn btn-sm btn-danger">Borrar</a>
                        </td>
                      </tr>
                    {% empty %}
                      <tr>
                        <td colspan="3">No hay diseños registrados.</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% endif %}
            {% elif mostrar == 'promos' %}
              {% if accion == 'crear' %}
                <h2>Añadir Nueva Promoción</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'editar' %}
                <h2>Editar Promoción</h2><br />
                <form class="form col-6" method="post">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'borrar' %}
                <h2>¿Seguro que deseas borrar esta promoción?</h2>
                <form method="post">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-danger">Borrar</button>
                  <a href="?mostrar=promos" class="btn btn-secondary">Cancelar</a>
                </form>
              {% else %}
                <h2>Lista de Promociones</h2>
                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th>Título</th>
                      <th>Descripción</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for promo in promos %}
                      <tr>
                        <td>{{ promo.titulo }}</td>
                        <td>{{ promo.descripcion }}</td>
                        <td>
                          <a href="?mostrar=promos&accion=editar&pk={{ promo.pk }}" class="btn btn-sm btn-dark">Editar</a>
                          <a href="?mostrar=promos&accion=borrar&pk={{ promo.pk }}" class="btn btn-sm btn-danger">Borrar</a>
                        </td>
                      </tr>
                    {% empty %}
                      <tr>
                        <td colspan="3">No hay promociones registradas.</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% endif %}
            {% elif mostrar == 'usuarios' %}
              {% if accion == 'crear' %}
                <h2>Añadir Nuevo Usuario</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'editar' %}
                <h2>Editar Usuario</h2><br />
                <form class="form col-6" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {{ form|crispy }}
                  <button type="submit" class="btn btn-success mt-3">Guardar</button>
                </form>
              {% elif accion == 'borrar' %}
                <h2>¿Seguro que deseas borrar este usuario?</h2>
                <form method="post">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-danger">Borrar</button>
                  <a href="?mostrar=usuarios" class="btn btn-secondary">Cancelar</a>
                </form>
              {% else %}
                <h2>Lista de Usuarios</h2>
                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th>Nombre</th>
                      <th>Email</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for usuario in usuarios %}
                      <tr>
                        <td>{{ usuario.nombre }}</td>
                        <td>{{ usuario.email }}</td>
                        <td>
                          <a href="?mostrar=usuarios&accion=editar&pk={{ usuario.pk }}" class="btn btn-sm btn-dark">Editar</a>
                          <a href="?mostrar=usuarios&accion=borrar&pk={{ usuario.pk }}" class="btn btn-sm btn-danger">Borrar</a>
                        </td>
                      </tr>
                    {% empty %}
                      <tr>
                        <td colspan="3">No hay usuarios registrados.</td>
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              {% endif %}
            {% else %}
              <p>Seleccione una opción en el menú para administrar el contenido.</p>
            {% endif %}
          </div>
          <br />
          <hr />
          <br />
          <div class="adminmenu">
            <h3>Menú de Administración</h3>
            <ul>
              <li>
                <a href="?mostrar=artistas">Artistas</a> - <a href="?mostrar=artistas&accion=crear" class="btn btn-sm btn-success">Añadir</a>
              </li>
              <li>
                <a href="?mostrar=citas">Citas</a> - <a href="?mostrar=citas&accion=crear" class="btn btn-sm btn-success">Añadir</a>
              </li>
              <li>
                <a href="?mostrar=disenyos">Diseños</a> - <a href="?mostrar=disenyos&accion=crear" class="btn btn-sm btn-success">Añadir</a>
              </li>
              <li>
                <a href="?mostrar=promos">Promociones</a> - <a href="?mostrar=promos&accion=crear" class="btn btn-sm btn-success">Añadir</a>
              </li>
              <li>
                <a href="?mostrar=usuarios">Usuarios</a> - <a href="?mostrar=usuarios&accion=crear" class="btn btn-sm btn-success">Añadir</a>
              </li>
            </ul>
          </div>
        </div>
      </section>
    </main>
  </body>
{% endblock %}
